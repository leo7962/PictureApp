"use strict";import{app,BrowserWindow,Tray,nativeImage,globalShortcut,protocol}from"electron";import devtools from"./devtools";import handleerror from"./handleerror";import MainIpc from"./ipcMainFunctions";import os from"os";import path from"path";import{request}from"http";global.win,global.tray,"development"===process.env.NODE_ENV&&(devtools(),console.log("Ejecutando aplicativo")),app.on("before-quit",()=>{globalShortcut.unregisterAll()}),app.on("ready",()=>{protocol.registerFileProtocol("pap",(o,e)=>{const r=o.url.substr(6);e({path:path.normalize(`${r}`)})},o=>{o&&console.error("Failed to refister protocol")}),global.win=new BrowserWindow({width:800,height:600,title:"BPictureApp",center:!0,maximizable:!1,icon:path.join(__dirname,"assets","icons","main-icon.ico"),webPreferences:{nodeIntegration:!0}}),globalShortcut.register("CommandOrControl+Alt+p",()=>{global.win.show(),global.win.focus()}),MainIpc(global.win),handleerror(global.win),global.win.once("ready-to-show",()=>{global.win.show()}),win.on("move",()=>{const o=win.getPosition();console.log(`La posiciÃ³n es ${o}`)}),global.win.on("closed",()=>{global.win=null,app.quit()});let o;o="win32"===os.platform()?path.join(__dirname,"assets","icons","tray-icon.ico"):path.join(__dirname,"assets","icons","tray-icon.png"),global.tray=new Tray(nativeImage.createFromPath(o)),global.win.loadURL(`file://${__dirname}/renderer/index.html`)});